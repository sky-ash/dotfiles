#!/bin/bash

if [[ -d "$HOME/dotfiles" ]]; then
    DOTS="$HOME/dotfiles"

    make_home_dir() {
    	mkdir -p $HOME/.config || true
    	mkdir -p $HOME/.cache || true
    	mkdir -p $HOME/.local/share || true
		mkdir -p $HOME/.local/bin || true
    }
    
    back_up_configure() {
		rm -rf $HOME/.dotfiles_backup

    	mkdir -p $HOME/.dotfiles_backup/.config
    	cp -r $HOME/.config/{btop,catnap,cava,dunst,hypr,kitty,rofi,waybar} $HOME/.dotfiles_backup/.config
    
    	mkdir -p $HOME/.dotfiles_backup/.local/share
    	mkdir -p $HOME/.dotfiles_backup/.local/bin
    	cp -r $HOME/.local/share/{fonts,icons,wallpaper} $HOME/.dotfiles_backup/.local/share
    	cp -r $HOME/.local/bin/* $HOME/.dotfiles_backup/.local/bin
    
    	cp -r $HOME/{.bash_profile,.bashrc,.gitconfig,.gtkrc-2.0,.xinitrc} $HOME/.dotfiles_backup
    }

    make_home_dir 2>/dev/null
	back_up_configure

	rm -rf $HOME/.config/{btop,catnap,cava,dunst,hypr,kitty,rofi,waybar}
	cp -r $DOTS/home/.config/* $HOME/.config/

	rm -rf $HOME/.local/share/{fonts,icons,wallpaper}
	rm -rf $HOME/.local/bin/*
	cp -r $DOTS/home/.local/share/* $HOME/.local/share/
	cp -r $DOTS/home/.local/bin/* $HOME/.local/bin/

	rm -rf $HOME/{.bash_profile,.bashrc,.gitconfig,.gtkrc-2.0,.xinitrc}
	cp -r $DOTS/home/{.bash_profile,.bashrc,.gitconfig,.gtkrc-2.0,.xinitrc} $HOME/

fi
